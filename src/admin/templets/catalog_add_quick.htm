<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <title><?php echo Lang('catalog_quick_add');?></title>
  <link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/web/css/admin.min.css">
  <script src="../static/web/js/jquery.min.js"></script>
  <script>
    var $ = jQuery;
    $(document).ready(function () {
      //删除按钮事件
      $("#addQuick .del").click(function () {
        $(this).parents(".repeat").remove();
      });
      //添加按钮事件
      $("#add").click(function () {
        var id = $("#addQuick tr").prevAll("tr").length + 1;
        $("#addQuick tr:eq(1)").clone(true).addClass("repeat")
          .find(".rank input")
          .attr("value", function () { return id })
          .end()
          .find(".pubinputs")
          .attr("name", function () { return this.name + id })
          .attr("id", function () { return this.id + id })
          .end()
          .appendTo($("#addQuick"));
      });
      //删除按钮事件
      $("#addQuickRel .del").click(function () {
        $(this).parents(".repeat").remove();
      });
      //添加按钮事件
      $("#addrel").click(function () {
        var id = $("#addQuickRel tr").prevAll("tr").length + 1;
        $("#addQuickRel tr:eq(1)").clone(true).addClass("repeat")
          .find(".rank input")
          .attr("value", function () { return id })
          .end()
          .find(".pubinputs")
          .attr("name", function () { return this.name + id })
          .attr("id", function () { return this.id + id })
          .end()
          .appendTo($("#addQuickRel"));
      });
    });
  </script>
  <script>
    function ShowHide(objname) {
      var obj = document.getElementById(objname);
      if (obj.style.display == "")
        obj.style.display = "none";
      else
        obj.style.display = "";
    }
    function ShowObj(objname) {
      var obj = document.getElementById(objname);
      obj.style.display = "";
    }
    function HideObj(objname) {
      var obj = document.getElementById(objname);
      obj.style.display = "none";
    }
    function showSeltype(objname) {
      if (objname.value != 0) {
        $("#addQuickRel").show();
        $("#pathtype").show();
        $("#addQuick").hide();
        $("#savetype").val('rel');
      } else {
        $("#addQuickRel").hide();
        $("#addQuick").show();
        $("#pathtype").hide();
        $("#savetype").val('');
      }
    }
  </script>
</head>
<body>
  <form name="form1" action="catalog_add.php" method="post">
    <input type="hidden" name="dopost" value="savequick">
    <input type="hidden" name="savetype" value="" id="savetype">
    <table width="98%" align="center" cellpadding="0" cellspacing="0" class="mt-3 mb-3">
      <tr>
        <td>
          <table width="100%" cellspacing="0" cellpadding="0">
            <tr>
              <td><i class="fa fa-map-marker"></i> <a href="catalog_main.php"><?php echo Lang('catalog_main');?></a> &gt; <?php echo Lang('catalog_quick_add');?></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <table width="98%" align="center" cellpadding="0" cellspacing="0" class="mb-3">
      <tr>
        <td height="90" align="left">
          <table width="100%" cellspacing="0" id="head1" cellpadding="0">
            <tr>
              <td colspan="2">
                <table width="90" cellpadding="0" cellspacing="0">
                  <tr>
                    <td width="90" height="28" align="center" class="biz-itemnote1"><?php echo Lang('normal_options');?></td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
          <table width="100%" id="needset" cellspacing="0" cellpadding="0" class="table biz-border">
            <tr>
              <td bgcolor="#f8f8f8"><?php echo Lang('catalog_same_setting');?>：</td>
              <td bgcolor="#f8f8f8"></td>
            </tr>
            <tr>
              <td width="260" class="bline"><?php echo Lang('support_submission');?>：</td>
              <td class="bline">
                <label><input type="radio" name="issend" value="1" checked="1"> <?php echo Lang('support');?></label>
                <label><input type="radio" name="issend" value="0"> <?php echo Lang('unsupport');?></label>
              </td>
            </tr>
            <tr>
              <td class="bline"><?php echo Lang('catalog_referpath');?>：</td>
              <td class="bline">
                <label><input type="radio" name="referpath" value="parent" checked="1"> <?php echo Lang('catalog_parent');?>（
                <?php
                $pardir = '{cmspath}'.$cfg_arcdir;
                if (!empty($typedir)) $pardir = $typedir.'/';
                $pardir = preg_replace("#\/{1,}#", '/', $pardir);
                echo $pardir;
                ?>）</label>
                <label><input type="radio" name="referpath" value="cmspath"> <?php echo Lang('cmspath');?></label>
                <input type="hidden" name="nextdir" id="nextdir" value="<?php echo $pardir;?>">
                <span id="pathtype" style="display:none"><input type="radio" name="referpath" id="truepath3" value="typepath"><?php echo Lang('catalog_typepath');?></span>
              </td>
            </tr>
            <tr>
              <td class="bline"><?php echo Lang('catalog_reid');?>：</td>
              <td class="bline">
                <select name="reid" onchange="showSeltype(this)" style="width:160px">
                  <option value="0"><?php echo Lang('catalog_select_reid');?></option>
                  <?php echo $typeOptions;?>
                </select><?php echo Lang('catalog_select_reid_tip');?>
              </td>
            </tr>
            <tr>
              <td class="bline"><?php echo Lang('mychannel');?>：</td>
              <td class="bline"><select name="channeltype" id="channeltype" onChange="ParTemplet(this)" style="width:160px">
                <?php
                foreach($channelArray as $k=>$arr)
                {
            	    if ($k==$channelid) echo "<option value='{$k}' selected>{$arr['typename']}|{$arr['nid']}</option>";
                  else  echo "<option value='{$k}'>{$arr['typename']}|{$arr['nid']}</option>";
                }
                ?>
                </select>
              </td>
            </tr>
            <tr>
              <td class="bline"><?php echo Lang('catalog_list_option');?>：</td>
              <td class="bline">
                <label><input type="radio" name="isdefault" value="1" checked="1"> <?php echo Lang('catalog_list_option_1');?></label>
                <label><input type="radio" name="isdefault" value="0"> <?php echo Lang('catalog_list_option_0');?></label>
                <label><input type="radio" name="isdefault" value="-1"> <?php echo Lang('catalog_list_option_-1');?></label>
              </td>
            </tr>
            <tr>
              <td class="bline"><?php echo Lang('catalog_default_name');?>：</td>
              <td class="bline"><input type="text" name="defaultname" value="index.html" class="pubinputs" style="width:260px"></td>
            </tr>
            <tr id="helpvar2" style="display:none">
              <td bgcolor="#f8f8f8"><?php echo Lang('catalog_support_val');?>：</td>
              <td bgcolor="#f8f8f8"> <?php echo Lang('catalog_support_val_tip');?></td>
            </tr>
            <tr>
              <td class="bline"><?php echo Lang('catalog_namerule');?>：</td>
              <td class="bline">
                <input type="text" name="namerule" id="namerule" value="{typedir}/{aid}.html" class="pubinputs" style="width:260px">
                <i class="fa fa-question-circle" title="帮助" onClick="ShowHide('helpvar2')" style="cursor:pointer"></i>
              </td>
            </tr>
            <tr id="helpvar3" style="display:none">
              <td bgcolor="#f8f8f8"><?php echo Lang('catalog_support_val');?>：</td>
              <td bgcolor="#f8f8f8"><?php echo Lang('catalog_support_val_tip2');?></td>
            </tr>
            <tr>
              <td><?php echo Lang('catalog_namerule2');?>：</td>
              <td>
                <input type="text" name="namerule2" id="namerule2" value="{typedir}/{tid}-{page}.html" class="pubinputs" style="width:260px">
                <i class="fa fa-question-circle" title="帮助" onClick="ShowHide('helpvar3')" style="cursor:pointer"></i>
              </td>
            </tr>
            <tr>
              <td bgcolor="#f8f8f8"><?php echo Lang('catalog_batch_edit');?>：</td>
              <td bgcolor="#f8f8f8"></td>
            </tr>
            <tr>
              <td colspan="2">
                <table id="addQuick" width="100%" cellpadding="3" cellspacing="1">
                  <tbody>
                    <tr bgcolor="#f8fcf2">
                      <td width="60"><?php echo Lang('sortrank');?></td>
                      <td width="260"><?php echo Lang('catalog_top_typename');?></td>
                      <td width="560"><?php echo Lang('catalog_sun_typename_tip');?></td>
                      <td align="center"><button type="button" id="add" class="btn btn-success btn-sm"><?php echo Lang('add');?></button></td>
                    </tr>
                    <tr>
                      <td>
                        <input type="hidden" name="posttype" value="" class="pubinputs">
                        <input type="text" name="rank" id="rank" value="1" class="pubinputs" style="width:60px">
                      </td>
                      <td><input type="text" name="toptype" id="toptype" class="pubinputs" style="width:160px"></td>
                      <td><input type="text" name="sontype" id="sontype" class="pubinputs" style="width:460px"></td>
                      <td align="center"><button type="button" id="add" class="btn btn-success btn-sm del"><?php echo Lang('delete');?></button></td>
                    </tr>
                    <?php for($i=2;$i<=10;$i++) {?>
                    <tr >
                      <td>
                        <input type="hidden" name="posttype<?php echo $i;?>" value="<?php echo $i;?>">
                        <input type="text" name="rank<?php echo $i;?>" id="rank<?php echo $i;?>" value="<?php echo $i;?>" class="pubinputs" style="width:60px">
                      </td>
                      <td><input type="text" name="toptype<?php echo $i;?>" id="toptype<?php echo $i;?>" class="pubinputs" style="width:160px"></td>
                      <td><input type="text" name="sontype<?php echo $i;?>" id="sontype<?php echo $i;?>" class="pubinputs" style="width:460px"></td>
                      <td align="center"><button type="button" id="add" class="btn btn-success btn-sm del"><?php echo Lang('delete');?></button></td>
                    </tr>
                    <?php }?>
                  </tbody>
                </table>
                <table id="addQuickRel" width="100%" cellpadding="3" cellspacing="1" style="display:none">
                  <tbody>
                    <tr bgcolor="#f8fcf2">
                      <td width="60"><?php echo Lang('sortrank');?></td>
                      <td width="260"><?php echo Lang('catalog_typename');?></td>
                      <td align="center"><button type="button" id="addrel" class="btn btn-success btn-sm"><?php echo Lang('add');?></button></td>
                    </tr>
                    <tr>
                      <td>
                        <input type="hidden" name="posttype" value="" class="pubinputs">
                        <input type="text" name="rank" id="rank" value="1" class="pubinputs" style="width:60px">
                      </td>
                      <td><input type="text" name="reltype" id="reltype" class="pubinputs" style="width:160px"></td>
                      <td align="center"><button type="button" id="add" class="btn btn-success btn-sm del"><?php echo Lang('delete');?></button></td>
                    </tr>
                    <?php for($i=2;$i<=10;$i++) {?>
                    <tr>
                      <td>
                        <input type="hidden" name="posttype<?php echo $i;?>" value="<?php echo $i;?>">
                        <input type="text" name="rank<?php echo $i;?>" id="rank<?php echo $i;?>" value="<?php echo $i;?>" class="pubinputs" style="width:60px">
                      </td>
                      <td><input type="text" name="reltype<?php echo $i;?>" id="reltype<?php echo $i;?>" class="pubinputs" style="width:160px"></td>
                      <td align="center"><button type="button" id="add" class="btn btn-success btn-sm del"><?php echo Lang('delete');?></button></td>
                    </tr>
                    <?php }?>
                  </tbody>
                </table>
              </td>
            </tr>
          </table>
          <table width="100%" cellspacing="0" cellpadding="0" bgcolor="#f8f8f8" class="mb-3 biz-border border-top-0">
            <tr>
              <td align="center" class="py-2">
                <button type="submit" class="btn btn-success btn-sm"><?php echo Lang('save');?></button>
                <a href="catalog_main.php" class="btn btn-success btn-sm"><?php echo Lang('back');?></a>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </form>
</body>
</html>