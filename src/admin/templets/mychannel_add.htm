<!DOCTYPE html>
<html>
<head>
  <meta charset="<?php echo $cfg_soft_lang;?>">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <title>新增频道</title>
  <link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/web/css/admin.css">
  <style>
    .style2 {
      color: #545b62;
    }
  </style>
  <script>
    function $Obj(objname) {
      return document.getElementById(objname);
    }
    function ShowHide2(objname) {
      var obj = $Obj(objname);
      if (obj.style.display != 'block') { obj.style.display = 'block' }
      else { obj.style.display = 'none'; }
    }
    function PublicDefault() {
      if ($Obj('is1').checked || $Obj('is2').checked) {
        $Obj("addcon").value = "archives_add.php";
        $Obj("editcon").value = "archives_edit.php";
        $Obj("mancon").value = "content_list.php";
        $Obj("useraddcon").value = "archives_add.php";
        $Obj("usereditcon").value = "archives_edit.php";
        $Obj("usermancon").value = "content_list.php";
      } else {
        $Obj("addcon").value = "archives_sg_add.php";
        $Obj("editcon").value = "archives_sg_edit.php";
        $Obj("mancon").value = "content_sg_list.php";
        $Obj("useraddcon").value = "archives_sg_add.php";
        $Obj("usereditcon").value = "archives_sg_edit.php";
        $Obj("usermancon").value = "content_sg_list.php";
      }
    }
  </script>
</head>
<body>
  <table width="98%" cellpadding="3" cellspacing="1" align="center" class="table maintable mt-3 mb-3">
    <form name="form1" action="mychannel_add.php" method="post">
      <input type="hidden" name="action" value="add">
      <tr>
        <td bgcolor="#f8f8f8" colspan="2"><a href="mychannel_main.php">内容模型管理</a> &gt; 新增内容模型</td>
      </tr>
      <tr>
        <td width="30%">频道ID<br>
          <span class="style2" id='help1'>数字，创建后不可修改，并具有唯一性</span></td>
        <td width="70%"><input type="text" name="id" id="id" size="10" value="<?php echo $newid;?>" class="pubinputs"> *</td>
      </tr>
      <tr>
        <td>名字标识<br>
          <span class="style2" id="help2">与文档的模板相关连，建议由英文、数字或下划线组成，因为部份Unix系统无法识别中文文件，频道默认文档模板是“default/article_名字标识.htm”，列表模板、封面模板类推 </span></td>
        <td><input type="text" name="nid" id="nid" value="ch<?php echo $newid;?>" class="pubinputs"> *</td>
      </tr>
      <tr>
        <td>频道名称<br>
          <span class="style2" id="help3">频道的中文名称，在后台管理，前台发布等均使用此名字</span></td>
        <td><input type="text" name="typename" id="typename" value="频道<?php echo $newid;?>" class="pubinputs"> *</td>
      </tr>
      <tr>
        <td>附加表<br>
          <span class="style2" id="help4">频道除主表以外其它自定义类型数据存放数据的表，如果您不使用主表关连的各种特性(推荐、会员权限等)，也可以使用完全以附加表作为存储数据</span></td>
        <td>
          <input type="text" name="addtable" id="addtable" value="<?php echo $cfg_dbprefix,'addon',$newid;?>" class="pubinputs"> 必须由英文、数字、下划线组成 *
          <label><input type="checkbox" name="isdel" id="isdel" value="1"> 删除已有表</label>
        </td>
      </tr>
      <tr>
        <td>模型性质<br>
          <span class="style2" id="help5">如果为系统模型将禁止删除，此选项不可修改，对于独立模型，系统强制创建字段aid,typeid,senddate,title,mid,channel，独立模型的文档内容必须点击栏目进入列表才能管理</span></td>
        <td>
          <label><input type="radio" name="issystem" id="is1" value="0" onClick="PublicDefault()" checked="1"> 自动模型</label>
          <label><input type="radio" name="issystem" id="is2" value="1" onClick="PublicDefault()"> 系统模型</label>
          <label><input type="radio" name="issystem" id="is3" value="-1" onClick="PublicDefault()"> 独立模型（不使用主表）</label>
        </td>
      </tr>
      <tr>
        <td>是否支持会员投稿</td>
        <td>
          <label><input type="radio" name="issend" value="0" checked="1"> 不支持</label>
          <label><input type="radio" name="issend" value="1"> 支持</label>
        </td>
      </tr>
      <tr>
        <td>会员许可投稿级别</td>
        <td>
          <select name="sendrank" id="sendrank" style="width:160px">
            <option value="0">游客</option>
            <?php
              $urank = $cuserLogin->getUserRank();
              $dsql->SetQuery("Select * from `#@__arcrank` where adminrank<='$urank' And `rank`>=10");
              $dsql->Execute();
              while($row2 = $dsql->GetObject())
              {
                echo "<option value='".$row2->rank."'>".$row2->membername."</option>";
              }
            ?>
          </select>
        </td>
      </tr>
      <tr>
        <td>许可投稿会员组</td>
        <td>
          <?php
          $dsql->SetQuery("Select * from `#@__member_model`");
          $dsql->Execute();
          while($row3 = $dsql->GetObject())
          {
            echo "<label><input type='radio' name='usertype' value=".$row3->name."> ".$row3->name."</label>";
          }
          ?>
          <label><input type="radio" name="usertype" value="" checked="1"> 不限</label>
        </td>
      </tr>
      <tr>
        <td>会员稿件默认状态</td>
        <td>
          <label><input type="radio" name="arcsta" value="-1" checked="1"> 未审核</label>
          <label><input type="radio" name="arcsta" value="0"> 已审核（自动生成网页）</label>
          <label><input type="radio" name="arcsta" value="1"> 已审核（仅使用动态文档）</label>
        </td>
      </tr>
      <tr>
        <td>投稿标题使用名称</td>
        <td><input type="text" name="titlename" id="titlename" value="标题" class="pubinputs"></td>
      </tr>
      <tr>
        <td>投稿是否使用摘要<br>
          <span class="style2">如果不使用主表(独立模型)，缩略图设置同</span></td>
        <td>
          <label><input type="radio" name="needdes" value="1" checked="1"> 使用</label>
          <label><input type="radio" name="needdes" value="0"> 不使用</label>
        </td>
      </tr>
      <tr>
        <td>投稿是否使用缩图</td>
        <td>
          <label><input type="radio" name="needpic" value="1" checked="1"> 使用</label>
          <label><input type="radio" name="needpic" value="0"> 不使用</label>
        </td>
      </tr>
      <tr>
        <td>默认栏目id<br>
          <span class="style2" id="help8">与投稿是唯一性结合可以用模型设计自定义表单</span></td>
        <td><input type="text" name="dfcid" id="dfcid" value="0" class="pubinputs"></td>
      </tr>
      <tr>
        <td>投稿具有唯一性<br>
          <span class="style2" id="help9">如果投稿是唯一的（会员只能在这个模型对应的栏目中发布单篇文档）其作用相当于自定义表单</span></td>
        <td>
          <label><input type="radio" name="onlyone" value="1"> 是</label>
          <label><input type="radio" name="onlyone" value="0" checked="1"> 不是</label>
        </td>
      </tr>
      <tr>
        <td>文档发布程序</td>
        <td><input type="text" name="addcon" id="addcon" value="archives_add.php" class="pubinputs"> *</td>
      </tr>
      <tr>
        <td>文档修改程序</td>
        <td><input type="text" name="editcon" id="editcon" value="archives_edit.php" class="pubinputs"> *</td>
      </tr>
      <tr>
        <td>文档管理程序</td>
        <td><input type="text" name="mancon" id="mancon" value="content_list.php" class="pubinputs"> *</td>
      </tr>
      <tr>
        <td>前台会员发布程序</td>
        <td><input type="text" name="useraddcon" id="useraddcon" value="archives_add.php" class="pubinputs"></td>
      </tr>
      <tr>
        <td>前台会员修改程序</td>
        <td><input type="text" name="usereditcon" id="usereditcon" value="archives_edit.php" class="pubinputs"></td>
      </tr>
      <tr>
        <td>前台会员管理程序</td>
        <td><input type="text" name="usermancon" id="usermancon" value="content_list.php" class="pubinputs"></td>
      </tr>
      <tr>
        <td colspan="2" align="center" class="py-2">
          <button type="submit" class="btn btn-success btn-sm">保存</button>
          <button type="button" onClick="location='mychannel_main.php';" class="btn btn-success btn-sm">返回</button>
        </td>
      </tr>
    </form>
  </table>
</body>
</html>