<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <title><?php echo Lang('media_main');?></title>
  <link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/web/css/admin.min.css">
  <style>
    .napisdiv {
      left: 10;
      top: 0;
      width: 150px;
      height: 100px;
      position: absolute;
      z-index: 3
    }
  </style>
  <script>
    //获得选中文件的文件名
    function getCheckboxItem() {
      var allSel = "";
      if (document.form1.aids.value) return document.form1.aids.value;
      for (i = 0; i < document.form1.aids.length; i++) {
        if (document.form1.aids[i].checked) {
          if (allSel == "")
            allSel = document.form1.aids[i].value;
          else
            allSel = allSel + "," + document.form1.aids[i].value;
        }
      }
      return allSel;
    }
    function AllSel() {
      for (i = 0; i < document.form1.aids.length; i++) {
        document.form1.aids[i].checked = true;
      }
    }
    function NoneSel() {
      for (i = 0; i < document.form1.aids.length; i++) {
        document.form1.aids[i].checked = false;
      }
    }
    function DelSel() {
      var nid = getCheckboxItem();
      if (nid == "") {
        alert("<?php echo Lang('admin_err_select_none');?>");
        return;
      }
      location.href = "media_edit.php?dopost=del&ids=" + nid;
    }
  </script>
</head>
<body>
  <table width="98%" align="center" cellpadding="3" cellspacing="1" class="table maintable mt-3 mb-3">
    <tr>
      <td bgcolor="#f8f8f8" colspan="7">
        <table width="98%" cellpadding="0" cellspacing="0" class="table-borderless">
          <tr>
            <td width="30%"><?php echo Lang('media_main');?></td>
            <td width="70%" align="right"><a href="media_add.php" class="btn btn-success btn-sm"><?php echo Lang('media_upload_new');?></a></td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td colspan="7">
        <table width="900" cellspacing="0" cellpadding="0" class="table-borderless">
          <form name="forms" method="post" action="media_main.php">
            <tr>
              <td width="280" align="center">
                <input type="text" name="keyword" id="keyword" placeholder="<?php echo Lang('input_keywords_tip');?>" value="<?php echo $keyword?>" style="width:260px">
              </td>
              <td width="170">
                <select name="mediatype" style="width:160px">
                  <option value="0"><?php echo Lang("media_type");?></option>
                  <option value="1" <?php if ($mediatype==1) echo "selected"?>><?php echo Lang("media_type_1");?></option>
                  <option value="2" <?php if ($mediatype==2) echo "selected"?>><?php echo Lang("media_type_2");?></option>
                  <option value="3" <?php if ($mediatype==3) echo "selected"?>><?php echo Lang("media_type_3");?></option>
                  <option value="4" <?php if ($mediatype==4) echo "selected"?>><?php echo Lang("media_type_4");?></option>
                </select>
              </td>
              <td width="170">
                <select name="membertype" style="width:160px">
                  <option value="0"><?php echo Lang("user_group");?></option>
                  <option value="1" <?php if ($membertype==1) echo "selected"?>><?php echo Lang("administrator");?></option>
                  <option value="2" <?php if ($membertype==2) echo "selected"?>><?php echo Lang("user");?></option>
                </select>
              </td>
              <td><button type="submit" class="btn btn-success btn-sm"><?php echo Lang("search");?></button></td>
            </tr>
          </form>
        </table>
      </td>
    </tr>
    <tr align="center" bgcolor="#f8fcf2">
      <td width="8%"><?php echo Lang("select");?></td>
      <td width="28%"><?php echo Lang("title");?></td>
      <td width="10%"><?php echo Lang("size");?></td>
      <td width="15%"><?php echo Lang("user");?></td>
      <td width="15%"><?php echo Lang("uptime");?></td>
      <td width="9%"><?php echo Lang("media_type");?></td>
      <td width="15%"><?php echo Lang("operation");?></td>
    </tr>
    <form name="form1">
      {dede:datalist empty='<tr><td colspan="7"><center>~lang:none_result~</center></td></tr>'}
      <tr align="center" onmousemove="javascript:this.bgColor='#f8fcf2';" onmouseout="javascript:this.bgColor='#ffffff';">
        <td><input type="checkbox" name="aids" id="aids{dede:field.aid/}" value="{dede:field.aid/}"></td>
        <td><a href="{dede:field.url/}" title="{dede:field.url/}" target="_blank">{dede:field.title/}</a></td>
        <td>{dede:field.filesize function='GetFileSize(@me)'/}</td>
        <td>{dede:field.adminname function="UploadAdmin(@me,$fields['membername'])"/}</td>
        <td>{dede:field.uptime function="MyDate('Y-m-d H:i',@me)"/}</td>
        <td>{dede:field.mediatype function="MediaType(@me,$fields['url'])"/}</td>
        <td>
          <a href="media_edit.php?aid={dede:field.aid/}&dopost=edit" class="btn btn-success btn-sm"><i class="fa fa-code"></i> <?php echo Lang("edit");?></a>
          <a href="media_edit.php?aid={dede:field.aid/}&dopost=del" class="btn btn-success btn-sm"><i class="fa fa-trash"></i> <?php echo Lang("delete");?></a>
        </td>
      </tr>
      {/dede:datalist}
      <tr>
        <td colspan="7">
          <button type="button" name="b4" class="btn btn-success btn-sm" onClick="AllSel();"><?php echo Lang("select_all");?></button>
          <button type="button" name="b5" class="btn btn-success btn-sm" onClick="NoneSel();"><?php echo Lang("cancel");?></button>
          <button type="button" name="b6" class="btn btn-success btn-sm" onClick="DelSel();"><?php echo Lang("delete");?></button>
        </td>
      </tr>
      <tr>
        <td align="center" colspan="7" bgcolor="#f8f8f8" class="py-2">{dede:pagelist listsize='6'/}</td>
      </tr>
    </form>
  </table>
</body>
</html>