<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=<?php echo $cfg_soft_lang; ?>">
  <title>文档批量管理</title>
	<link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
	<link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/web/css/admin.css">
  <link rel="stylesheet" href="../static/web/css/daterangepicker.css">
  <script src="../static/web/js/jquery.min.js" language="javascript" type="text/javascript"></script>
  <script type="text/javascript" src="../static/web/js/moment.min.js"></script>
  <script type="text/javascript" src="../static/web/js/daterangepicker.js"></script>
  <script language='javascript'>
    function ShowHideTime() {
      var selBox = document.getElementById('seltime');
      var obj = document.getElementById('seltimeField');
      if (selBox.checked) obj.style.display = "block";
      else obj.style.display = "none";
    }
    function ShowHideMove() {
      var selBox = document.getElementById('moveradio');
      var obj = document.getElementById('moveField');
      if (selBox.checked) obj.style.display = "block";
      else obj.style.display = "none";
    }
    $(document).ready(function () {
      $('.datepicker').daterangepicker({
        "singleDatePicker": true,
        "autoApply": true,
        "showDropdowns": true,
        "linkedCalendars": false,
        "timePicker": true,
        "timePicker24Hour": true,
        "timePickerSeconds": true,
        "showCustomRangeLabel": false,
        ranges: {
          '今日': [moment(), moment()],
          '昨日': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
          '本月': [moment().startOf('month'), moment().startOf('month')],
          '上月': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').startOf('month')]
        },
        "locale": {
          format: 'YYYY-MM-DD HH:mm:ss',
          applyLabel: '确定',
          cancelLabel: '取消',
          daysOfWeek: ['日', '一', '二', '三', '四', '五', '六'],
          monthNames: ['一月', '二月', '三月', '四月', '五月', '六月',
            '七月', '八月', '九月', '十月', '十一月', '十二月'],
          firstDay: 1
        }
      }, function (start) {
        $(this).val(start.format("YYYY-MM-DD HH:mm:ss"));
      });
    })
  </script>
</head>
<body background='../static/web/img/allbg.gif' leftmargin='8' topmargin='8'>
  <table width="98%" border="0" cellpadding="3" cellspacing="1" align="center"  class="table maintable table-bordered mt-3">
    <form name="form1" action="content_batchup_action.php" target="stafrm" method="post">
      <input type="hidden" name="dopost" value="go">
      <tr>
        <td height="26" colspan="2" background='../static/web/img/tbg.gif'>
          <table width="98%" border="0" cellpadding="0" cellspacing="0" class="table table-borderless">
            <tr>
              <td width="177" height="18" style="padding-left:10px">文档批量管理：</td>
              <td align="right"></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td width="177" align="center" bgcolor="#FFFFFF">选定栏目：</td>
        <td bgcolor="#FFFFFF">
          <?php
       $tl = new TypeLink(0);
       $typeOptions = $tl->GetOptionArray(0,$admin_catalogs,0,1);
       echo "<select name='typeid' style='width:300px'>\r\n";
       echo "<option value='0' selected>不限栏目</option>\r\n";
       echo $typeOptions;
       echo "</select>";
		?>
        </td>
      </tr>
      <tr>
        <td height="26" align="center" bgcolor="#FFFFFF">起始ID：</td>
        <td height="26" bgcolor="#FFFFFF">开始：
          <input name="startid" type="text" id="startid" size="10">
          结束：
          <input name="endid" type="text" id="endid" size="10"></td>
      </tr>
      <tr>
        <td height="26" align="center" bgcolor="#FFFFFF">档案发布时间：</td>
        <td height="26" bgcolor="#FFFFFF">
          <table width="500" border="0" cellspacing="0" cellpadding="0" class="table table-borderless">
            <tr>
              <td colspan="2"> <label>
                  <input name="seltime" type="checkbox" class="np" id="seltime" value="1" onClick="ShowHideTime()">
                  启用时间筛选（仅移动或删除文档可用该选项）</label></td>
            </tr>
            <tr id='seltimeField' style='display:none' height='26'>
              <td width="250">开始：
                <?php $nowtime = GetDateTimeMk(time()-(24*3600*30)); ?>
                <input name="starttime" value="<?php echo $nowtime; ?>" type="text" id="starttime" class="datepicker">
              </td>
              <td width="250">结束：
                <?php $nowtime = GetDateTimeMk(time()); ?>
                <input name="endtime" value="<?php echo $nowtime; ?>" type="text" id="endtime" class="datepicker">
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td height="26" align="center" bgcolor="#FFFFFF">用户的登录id：</td>
        <td height="26" bgcolor="#FFFFFF"><input name="userid" type="text" id="userid" size="20">
          (网址uid=后面跟的id)</td>
      </tr>
      <tr>
        <td height="26" align="center" bgcolor="#FFFFFF">操作：</td>
        <td height="26" bgcolor="#FFFFFF">
          <label><input name="action" type="radio" class="np" id="checkradio" onClick="ShowHideMove()" value="check"
            checked='1' />
          审核文档</label>
          <label><input name="action" type="radio" class="np" value="makehtml" id="makehtmlradio" onClick="ShowHideMove()">
          更新HTML</label>
          <label><input name="action" type="radio" class="np" value="move" id="moveradio" onClick="ShowHideMove()">
          移动文档</label>
          <label><input name="action" type="radio" class="np" id="delradio" value="del" onClick="ShowHideMove()">
          删除文档</label></td>
      </tr>
      <tr height="26" bgcolor="#FFFFFF">
        <td height="26" align="center" bgcolor="#FFFFFF">移动选项：</td>
        <td height="26" bgcolor="#FFFFFF">
          <?php
       echo "<span id='moveField' style='display:none'>新位置：";
       echo "<select name='newtypeid' style='width:250px'>\r\n";
       echo $typeOptions;
       echo "</select>";
       echo "<hr>";
       echo "标题关键词：<input id='movekeyword' type='text' name='keyword' value='' ></span>";
	  ?>
        </td>
      </tr>
      <tr>
        <td height="30" colspan="2" bgcolor="#ffffff" align="center">
          <button name="b112" type="button" onClick="document.form1.submit();" class="btn btn-success">开始操作</button>
        </td>
      </tr>
    </form>
    <tr bgcolor="#f6f6f6">
      <td height="26" colspan="2">
        <table width="100%" class="table table-borderless">
          <tr>
            <td width="74%">进行状态：</td>
            <td width="26%" align="right">
              <script language='javascript'>
                function ResizeDiv(obj, ty) {
                  if (ty == "+") document.all[obj].style.pixelHeight += 50;
                  else if (document.all[obj].style.pixelHeight > 80) document.all[obj].style.pixelHeight = document.all[obj].style.pixelHeight - 50;
                }
              </script>
              [<a href='javascript:;' onClick="ResizeDiv('mdv','+');">增大</a>] [<a href='javascript:;' onClick="ResizeDiv('mdv','-');">缩小</a>]
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr bgcolor="#FFFFFF">
      <td colspan="2" id="mtd">
        <div id='mdv' style='width:100%;height:250px'>
          <iframe name="stafrm" frameborder="0" id="stafrm" width="100%" height="100%"></iframe>
        </div>
      </td>
    </tr>
    <form name="form2" action="content_batchup_action.php" target="stafrm" method="post">
      <input type="hidden" name="dopost" value="go">
      <tr>
        <td height="26" colspan="2" background='../static/web/img/tbg.gif'>
          <table width="98%" border="0" cellpadding="0" cellspacing="0" class="table table-borderless">
            <tr>
              <td width="30%" height="18" style="padding-left:10px">错误文档修正：</td>
              <td width="70%" align="right"></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr height="26" bgcolor="#FFFFFF">
        <td height="26" colspan="2" align="center" bgcolor="#FFFFFF">
          <label><input type='radio' value='delnulltitle' name='action' class='np' />
           删除空标题的文章</label>
          <label><input type='radio' value='delnullbody' name='action' class='np' />
           删除内容为空的文章</label>
          <label><input type='radio' value='modddpic' name='action' class='np' />
           更正缩图错误</label>
        </td>
      </tr>
      <tr>
        <td height="30" colspan="2" bgcolor="#f6f6f6" align="center">
          <button name="b112" type="button" onClick="document.form2.submit();" class="btn btn-success">开始操作</button>
        </td>
      </tr>
    </form>
  </table>
</body>
</html>