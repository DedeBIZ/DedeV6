<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
		<title>网站栏目管理</title>
		<link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
		<link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
		<link rel="stylesheet" href="../static/web/css/admin.css">
		<style>.admin-td{border-bottom:1px solid #dee2e6!important}</style>
		<script src="../static/web/js/jquery.min.js"></script>
		<script src="../static/web/js/bootstrap.min.js"></script>
		<script src="../static/web/js/webajax.js"></script>
		<script src="js/global.js"></script>
	</head>
	<body>
		<table cellpadding="1" cellspacing="1" align="center" class="table maintable my-3">
			<tr>
				<td>
					<a href="catalog_add.php?listtype=all" class="btn btn-success btn-sm">添加栏目</a>
					<a href="catalog_add.php?dopost=quick" class="btn btn-success btn-sm">批量添加</a>
					<a href="catalog_do.php?dopost=upcatcache" class="btn btn-success btn-sm">更新缓存</a>
					<button type="button" name="sb1" class="btn btn-success btn-sm" onclick="document.form1.submit();">更新排序</button>
				</td>
				<td align="right">
					<?php if (!isset($exallct)) {?>
					<a href="catalog_main.php?exallct=all" class="btn btn-success btn-sm">展开栏目</a>
					<?php } else {?>
					<a href="catalog_main.php" class="btn btn-success btn-sm">收缩栏目</a>
					<?php }?>
				</td>
			</tr>
		</table>
		<form name="form1" method="post" action="catalog_do.php?dopost=upRankAll">
			<table cellpadding="1" cellspacing="1" align="center" class="maintable mb-3">
				<tr>
					<td bgcolor="#f5f5f5" class="admin-td">网站栏目管理</td>
				</tr>
				<tr>
					<td>
						<?php
						if (empty($opendir)) $opendir=-1;
						if ($userChannel>0) $opendir=$userChannel;
						$tu = new TypeUnit();
						$tu->ListAllType($userChannel,$opendir);
						?>
					</td>
				</tr>
			</table>
		</form>
		<div id="mdlViewAPI" class="modal fade" tabindex="-1" aria-hidden="true">
			<div class="modal-dialog modal-xl">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">跨站调用</h5>
						<button type="button" class="update-close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times"></i></button>
					</div>
					<div class="modal-body">
						<form>
							<div class="form-group">
								<span>
									本功能主要用于移动客户端或第三方系统调用栏目数据进行展现。
								</span>
							</div>
							<div class="form-group">
								<label for="iptAPICode">代码调用</label>
								<nav>
									<div class="nav nav-tabs" id="nav-tab" role="tablist">
									  <button class="nav-link active" id="nav-php-tab" data-toggle="tab" data-target="#nav-php" type="button" role="tab" aria-controls="nav-php" aria-selected="true">PHP</button>
									  <button class="nav-link" id="nav-js-tab" data-toggle="tab" data-target="#nav-js" type="button" role="tab" aria-controls="nav-js" aria-selected="true">Javasctipt</button>
									  <button class="nav-link" id="nav-go-tab" data-toggle="tab" data-target="#nav-go" type="button" role="tab" aria-controls="nav-go" aria-selected="false">Go</button>
									  <button class="nav-link" id="nav-python-tab" data-toggle="tab" data-target="#nav-python" type="button" role="tab" aria-controls="nav-python" aria-selected="false">Python3</button>
									</div>
								  </nav>
								  <div class="tab-content py-3" id="nav-tabContent">
									<div class="tab-pane fade show active" id="nav-php" role="tabpanel" aria-labelledby="nav-php-tab">
										<pre><code id="codephp"></code></pre></div>
									<div class="tab-pane fade" id="nav-js" role="tabpanel" aria-labelledby="nav-js-tab">
										<pre><code id="codejs"></code></pre>
									</div>
									<div class="tab-pane fade" id="nav-go" role="tabpanel" aria-labelledby="nav-go-tab">
										<pre><code id="codego"></code></pre>
									</div>
									<div class="tab-pane fade" id="nav-python" role="tabpanel" aria-labelledby="nav-python-tab">
										<pre><code id="codepython"></code></pre>
									</div>
								  </div>
							</div>
							<div class="form-group">
								<label for="iptAPITag">标签调用</label>
								<pre><code id="codetag"></code></pre>
							</div>
							
						</form>
					</div>
					<div class="modal-footer">
						<div class="btnStep">
							<button id="btnGoStep4" type="button" class="btn btn-success">我知道了</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			function LoadSuns(ctid, tid) {
				if ($DE(ctid).innerHTML.length < 10) {
					$DE('img' + tid).className = 'fa fa-minus-square';
					fetch('catalog_do.php?dopost=GetSunLists&cid=' + tid).then(resp => resp.text()).then((d) => {
						$DE(ctid).innerHTML = d;
					});
				} else {
					showHide(ctid, tid);
				}
			}
			function showHide(objname, tid) {
				if ($DE(objname).style.display == "none") {
					$DE('img' + tid).className = 'fa fa-minus-square';
					$DE(objname).style.display = BROWSER.firefox ? "" : "block";
				} else {
					$DE('img' + tid).className = 'fa fa-plus-square';
					$DE(objname).style.display = "none";
				}
			}
			function showAPI(tid) {
				fetch('catalog_do.php?dopost=viewAPI&typeid=' + tid).then(resp => resp.text()).then((d) => {
					let data = JSON.parse(d);
					if (data.code == 0) {
						$("#codephp").html(data.data.phpcode);
						$("#codego").html(data.data.gocode);
						$("#codepython").html(data.data.pythoncode);
						$("#codejs").html(data.data.jscode);
						$("#codetag").html(data.data.tagcode);
						$("#mdlViewAPI").modal('show');
					}
				});
				
			}
		</script>
	</body>
</html>