<!DOCTYPE html>
<html>
<head>
<meta charset="<?php echo $cfg_soft_lang; ?>">
<title>类别管理</title>
<link rel="stylesheet" href="../static/css/bootstrap.min.css">
<link rel="stylesheet" href="../static/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="css/base.css">
<script src="js/context_menu.js"></script>
<script src="js/ieemu.js"></script>
<script src="../static/js/webajax.js"></script>
<script>
function LoadSuns(ctid,tid)
{
    if($DE(ctid).innerHTML.length < 10){
        fetch('catalog_do.php?dopost=GetSunListsMenu&cid='+tid).then(resp=>resp.text()).then((d)=>{
            $DE(ctid).innerHTML = d;
		});
    }
    else{ if(document.all) showHide(ctid); }
}
function showHide(objname)
{
    if($DE(objname).style.display=="none") $DE(objname).style.display = "revert";
    else $DE(objname).style.display="none";
    return false;
}
if(moz) {
    extendEventObject();
    extendElementModel();
    emulateAttachEvent();
}
function JumpOneUrl(surl) {
    document.formjump.action=surl;
    document.formjump.submit();
}
//普通栏目
function CommonMenu(eobj,obj,tid,tname)
{
    var popupoptions
    popupoptions = [
        new ContextItem("增加内容",function(){ JumpOneUrl("catalog_do.php?cid="+tid+"&dopost=addArchives"); }),
        new ContextItem("管理内容",function(){ JumpOneUrl("catalog_do.php?cid="+tid+"&dopost=listArchives"); }),
        new ContextSeperator(),
        new ContextItem("预览分类",function(){ window.open("<?php echo $cfg_phpurl; ?>/list.php?tid="+tid); }),
        new ContextItem("更新HTML",function(){  JumpOneUrl("makehtml_list.php?cid="+tid); }),
        new ContextItem("获取JS文件",function(){  JumpOneUrl("catalog_do.php?cid="+tid+"&dopost=GetJs"); }),
        new ContextSeperator(),
        new ContextItem("增加子类",function(){ JumpOneUrl("catalog_add.php?id="+tid); }),
        new ContextItem("修改栏目",function(){ JumpOneUrl("catalog_edit.php?id="+tid); }),
        new ContextSeperator(),
        new ContextItem("移动栏目",function(){ JumpOneUrl("catalog_move.php?job=movelist&typeid="+tid); }),
        new ContextItem("删除栏目",function(){ JumpOneUrl("catalog_del.php?id="+tid+"&typeoldname="+tname); }),
        new ContextSeperator(),
        new ContextItem("关闭菜单",function(){})
    ]
    ContextMenu.display(eobj,popupoptions)
}
//封面模板
function CommonMenuPart(eobj,obj,tid,tname)
{
    var popupoptions
    popupoptions = [
        new ContextItem("管理内容",function(){ JumpOneUrl("catalog_do.php?cid="+tid+"&dopost=listArchives"); }),
        new ContextSeperator(),
        new ContextItem("预览分类",function(){ window.open("<?php echo $cfg_phpurl; ?>/list.php?tid="+tid); }),
        new ContextItem("更新HTML",function(){  JumpOneUrl("makehtml_list.php?cid="+tid); }),
        new ContextItem("获取JS文件",function(){  JumpOneUrl("catalog_do.php?cid="+tid+"&dopost=GetJs"); }),
        new ContextSeperator(),
        new ContextItem("增加子类",function(){  JumpOneUrl("catalog_add.php?id="+tid); }),
        new ContextItem("修改栏目",function(){  JumpOneUrl("catalog_edit.php?id="+tid); }),
        new ContextSeperator(),
        new ContextItem("移动栏目",function(){  JumpOneUrl("catalog_move.php?job=movelist&typeid="+tid); }),
        new ContextItem("删除栏目",function(){  JumpOneUrl("catalog_del.php?id="+tid+"&typeoldname="+tname); }),
        new ContextSeperator(),
        new ContextItem("向上排前一级",function(){  JumpOneUrl("catalog_do.php?cid="+tid+"&dopost=upRank"); }),
        new ContextSeperator(),
        new ContextItem("关闭菜单",function(){})
    ]
    ContextMenu.display(eobj,popupoptions)
}
//单个页面
function SingleMenu(eobj,obj,tid,tname)
{
    var popupoptions
    popupoptions = [
        new ContextItem("修改栏目",function(){ JumpOneUrl("catalog_edit.php?id="+tid); }),
        new ContextSeperator(),
        new ContextItem("移动栏目",function(){ JumpOneUrl("catalog_move.php?job=movelist&typeid="+tid); }),
        new ContextItem("删除栏目",function(){ JumpOneUrl("catalog_del.php?id="+tid+"&typeoldname="+tname); }),
        new ContextSeperator(),
        new ContextItem("关闭菜单",function(){})
    ]
    ContextMenu.display(eobj,popupoptions)
}
//跳转网址
function JumpMenu(eobj,obj,tid,tname)
{
    var popupoptions
    popupoptions = [
        new ContextItem("修改栏目",function(){ JumpOneUrl("catalog_edit.php?id="+tid); }),
        new ContextSeperator(),
        new ContextItem("移动栏目",function(){ JumpOneUrl("catalog_move.php?job=movelist&typeid="+tid); }),
        new ContextItem("删除栏目",function(){ JumpOneUrl("catalog_del.php?id="+tid+"&typeoldname="+tname); }),
        new ContextSeperator(),
        new ContextItem("关闭菜单",function(){})
    ]
    ContextMenu.display(eobj,popupoptions)
}
</script>
<style>
body{margin:0;background:#f6f6f6}
dl{clear:left}
.dlf{float:left;margin-top:12px;margin-left:10px}
.dlr{float:left;margin-top:10px}
.sunlist{display:inline-block;margin-top:10px;width:100%}
</style>
<base target="main">
</head>
<body target="main" onLoad="ContextMenu.intializeContextMenu()">
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr> 
            <td height="36" colspan="2" style="padding:10px">
                <form name="form1" target="main" action="public_guide.php"><input type="hidden" name="action" value="edit"></form>
                <form name="form2" target="main" action="catalog_main.php"></form>
                <form name="form3" target="menu" action="index_menu.php"></form>
                <form name="form5" target="main" action="catalog_add.php"><input type="hidden" name="dopost" value="quick"></form>
                <form name="form6" target="main" action="content_list.php"></form>
                <button type="button" name="sb5" class="btn btn-success btn-sm" onClick="document.form5.submit();">批量增加栏目</button>
                <button type="button" name="sb2" class="btn btn-success btn-sm" onClick="document.form2.submit();">栏目管理</button>
                <br>
                <button type="button" name="sb3" class="btn btn-success btn-sm mt-2" onClick="document.form3.submit();">菜单</button>
                <button type="button" name="sb6" class="btn btn-success btn-sm mt-2" onClick="document.form6.submit();">文档列表</button>
                <button type="button" name="sb1" class="btn btn-success btn-sm mt-2" onClick="document.form1.submit();">发布向导</button>
            </td>
        </tr>
        <tr> 
            <td width="20%" align="center" background="images/mtbg1.gif"><a href="javascript:;" onClick="showHide('items1')" target="_self"><img src="images/mtimg1.gif"></a></td>
            <td width="80%" background="images/mtbg1.gif">站点目录树</td>
        </tr>
        <tr> 
            <td colspan="2" id="items1" align="center"> 
            <?php 
            $tu = new TypeUnit($userChannel);
            $tu->ListAllType($userChannel,$opendir);
            ?>
            </td>
        </tr>
    </table>
</body>
</html>