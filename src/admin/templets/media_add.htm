<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
		<title>上传新文件</title>
		<link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
		<link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
		<link rel="stylesheet" href="../static/web/css/admin.css">
		<script src="../static/web/js/jquery.min.js"></script>
		<script src="../static/web/js/bootstrap.bundle.min.js"></script>
		<script src="js/main.js"></script>
		<script>
			function CheckSubmit() {
				if (document.form1.title.value == "") {
					ShowMsg("请设置标题");
					document.form1.title.focus();
					return false;
				}
			}
			var startNum = 6;
			function MakeUpload() {
				var upfield = document.getElementById("uploadfield");
				var endNum = Number(document.form1.picnum.value) + startNum;
				if (endNum > 40) endNum = 40;
				for (startNum; startNum <= endNum; startNum++) {
					upfield.innerHTML += "<input type='file' name='upfile" + startNum + "' class='biz-input-md'><br>";
				}
			}
			function ResetUpload() {
				var upfield = document.getElementById("uploadfield");
				upfield.innerHTML = "";
				startNum = 2;
			}
		</script>
	</head>
	<body>
		<table cellpadding="3" cellspacing="1" align="center" class="table maintable my-3">
			<tr>
				<td bgcolor="#f5f5f5">
					<table cellpadding="0" cellspacing="0" class="table table-borderless w-100">
						<tr>
							<td width="30%">上传新文件</td>
							<td width="70%" align="right"><a href="media_main.php" class="btn btn-success btn-sm">附件媒体数据管理</a></td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td>
					<div class="alert alert-info mb-0">图片类型仅支持jpg、png、gif、wbmp格式，flash为.swf格式，视音频和附件为限定扩展名的类型（可在系统参数中修改）</div>
				</td>
			</tr>
			<tr>
				<td align="center">
					<table cellpadding="0" cellspacing="0" class="table table-borderless w-100">
						<form enctype="multipart/form-data" name="form1" action="media_add.php" method="POST" onSubmit="return CheckSubmit();">
							<input type="hidden" name="dopost" value="upload">
							<input type="hidden" name="_csrf_token" value="<?php echo $GLOBALS['csrf_token'];?>">
							<tr>
								<td width="260" class="biz-td">媒体类型：</td>
								<td class="biz-td">
									<label><input type="radio" name="mediatype" value="1" checked="1"> 图片</label>
									<label><input type="radio" name="mediatype" value="2"> FLASH</label>
									<label><input type="radio" name="mediatype" value="3"> 视频音频</label>
									<label><input type="radio" name="mediatype" value="4"> 附件其它</label>
								</td>
							</tr>
							<tr>
								<td class="biz-td">说明标题：</td>
								<td class="biz-td"><input type="text" name="title" id="title" class="biz-input-md"></td>
							</tr>
							<tr>
								<td class="biz-td">参数说明：</td>
								<td class="biz-td" colspan="2">图片不需要指定“宽”、“高”，其它附加参数仅方便多媒体文件管理，没其它含义</td>
							</tr>
							<tr>
								<td class="biz-td">附加参数：</td>
								<td class="biz-td">
									宽：<input type="text" name="mediawidth" id="mediawidth" class="biz-input-sm">（像素）
									高：<input type="text" name="mediaheight" id="mediaheight" class="biz-input-sm">（像素）
									播放时间：<input type="text" name="playtime" id="mediawidth3" class="biz-input-sm">（分钟）
								</td>
							</tr>
							<tr>
								<td class="biz-td">上传文件：</td>
								<td class="biz-td">
									数量：<input type="text" name="picnum" id="picnum" value="5" class="biz-input-sm">
									<button type="button" name="Submit" class="btn btn-success btn-sm" onClick="MakeUpload()">增加</button>
									<button type="button" name="Submit" class="btn btn-success btn-sm" onClick="ResetUpload()">恢复</button>
								</td>
							</tr>
							<tr>
								<td></td>
								<td>
									<input name="upfile1" type="file" id="upfile1" class="biz-input-md"><br>
									<input name="upfile2" type="file" id="upfile2" class="biz-input-md"><br>
									<input name="upfile3" type="file" id="upfile3" class="biz-input-md"><br>
									<input name="upfile4" type="file" id="upfile4" class="biz-input-md"><br>
									<input name="upfile5" type="file" id="upfile5" class="biz-input-md"><br>
									<span id="uploadfield"></span>
								</td>
							</tr>
							<tr>
								<td colspan="2" align="center" class="py-2"><button type="submit" class="btn btn-success btn-sm">保存</button></td>
							</tr>
						</form>
					</table>
				</td>
			</tr>
		</table>
	</body>
</html>