<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <title><?php echo Lang('mytag_tag_guide');?></title>
  <link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/web/css/admin.min.css">
  <link rel="stylesheet" href="css/codemirror.css">
  <script src="../static/web/js/jquery.min.js"></script>
  <script src="js/main.js"></script>
  <script src="js/codemirror.js"></script>
  <script src="js/mode/xml/xml.js"></script>
  <script src="js/mode/javascript/javascript.js"></script>
  <script src="js/mode/css/css.js"></script>
  <script src="js/mode/htmlmixed/htmlmixed.js"></script>
</head>
<body>
  <center>
    <span style="display:none" id="list1">·[field:textlink/]（[field:pubdate function=MyDate('m-d',@me)/]）</span>
    <span style="display:none" id="list2">·[field:typelink/] [field:textlink/]</span>
    <span style="display:none" id="list3">
      <table width="98%" cellspacing="2" cellpadding="0">
        <tr>
          <td align="center">[field:imglink/]</td>
        </tr>
        <tr>
          <td align="center">[field:textlink/]</td>
        </tr>
      </table>
    </span>
    <span style="display:none" id="list4">
      <table width="100%" cellspacing="2" cellpadding="2">
        <tr>
          <td width="30%" align="center" rowspan="2">[field:imglink/]</td>
          <td width="70%"><a href="[field:filename/]">[field:title/]</a></td>
        </tr>
        <tr>
          <td>[field:info/]</td>
        </tr>
      </table>
    </span>
    <table width="98%" align="center" cellpadding="2" cellspacing="1" class="table maintable mt-3 mb-3">
      <form action="mytag_tag_guide_ok.php" method="post" target="stafrm" name="form1">
        <input type="hidden" name="dopost" value="gettag">
        <tr>
          <td bgcolor="#f8f8f8" align="left"><a href="mytag_main.php"><?php echo Lang('mytag_main');?></a> &gt; <?php echo Lang('mytag_tag_guide');?></td>
        </tr>
        <tr>
          <td>
            <table width="98%" align="right" cellpadding="0" cellspacing="0" class="table table-borderless">
              <tr>
                <td><?php echo Lang('mytag_tag_guide_liststyle');?>：</td>
              </tr>
              <tr>
                <td>
                  <table width="98%" cellspacing="0" cellpadding="0">
                    <tr>
                      <td width="25%">
                        <label><img src="../static/web/img/gt2.jpg"><input type="radio" name="liststyle" onClick="ChangeListStyle()" value="1" checked="1"></label>
                      </td>
                      <td width="25%">
                        <label><img src="../static/web/img/gt1.jpg"><input type="radio" name="liststyle" onClick="ChangeListStyle()" value="2"></label>
                      </td>
                      <td width="25%">
                        <label><img src="../static/web/img/gt3.jpg"><input type="radio" name="liststyle" onClick="ChangeListStyle()" value="3"></label>
                      </td>
                      <td>
                        <label><img src="../static/web/img/gt4.jpg"><input type="radio" name="liststyle" onClick="ChangeListStyle()" value="4"></label>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td><?php echo Lang('catalog_select');?>：
                  <?php
                  $tl = new DedeBIZ\TypeLink\TypeLink(0);
                  $typeOptions = $tl->GetOptionArray(0,$admin_catalogs,0,1);
                  echo "<select name='typeid' style='width:160px'>";
                  echo "<option value='0' selected>".Lang('catalog_nolimit')."</option>";
                  echo $typeOptions;
                  echo "</select>";
            		  ?>
                </td>
              </tr>
              <tr>
                <td><?php echo Lang('mytag_channel');?>：
                  <?php
                  echo "<select name='channel' style='width:160px'>";
                  echo "<option value='0' selected>".Lang('mychannel_nolimit')."</option>";
                  $tl->dsql->SetQuery("Select id,typename From #@__channeltype where id>0");
              	  $tl->dsql->Execute();
              	  while($row = $tl->dsql->GetObject())
              	  {
              	    echo "<option value='{$row->id}'>{$row->typename}</option>";
              	  }
                    echo "</select>";
              		?>
                  <?php echo Lang('freelist_att');?>：
                  <?php
                  echo "<select name='att' style='width:160px'>";
                  echo "<option value='0' selected>".Lang('unlimited')."</option>";
                  $tl->dsql->SetQuery("Select * From #@__arcatt");
            	    $tl->dsql->Execute();
            	    while($row = $tl->dsql->GetObject())
            	    {
            	      echo "<option value='{$row->att}'>{$row->attname}</option>";
            	    }
                  echo "</select>";
            		  ?>
                </td>
              </tr>
              <tr>
                <td>
                  <?php echo Lang('mytag_tag_guide_row');?>：<input type="text" name="row" id="row" value="10" style="width:60px">
                  <?php echo Lang('mytag_tag_guide_col');?>：<input type="text" name="col" id="col" value="1" style="width:60px">
                  <?php echo Lang('mytag_tag_guide_titlelen');?>：<input type="text" name="titlelen" id="titlelen" value="24" style="width:60px"><?php echo Lang('mytag_tag_guide_titlelen_tip');?>
                </td>
              </tr>
              <tr>
                <td><?php echo Lang('mytag_tag_guide_type');?>：
                  <label><input type="checkbox" name="types[]" id="type[]" value="image"> <?php echo Lang('mytag_tag_guide_type_image');?></label>
                  <label><input type="checkbox" name="types[]" id="type[]" value="commend"> <?php echo Lang('mytag_tag_guide_type_commend');?></label>
                  <label><input type="checkbox" name="types[]" id="type[]" value="spec"> <?php echo Lang('mytag_tag_guide_type_spec');?></label>
                  <?php echo Lang('keywords');?>：<input type="text" name="keyword" id="keyword"><?php echo Lang('mytag_tag_guide_type_keyword_tip');?>
                </td>
              </tr>
              <tr>
                <td><?php echo Lang('mytag_tag_guide_orderby');?>：
                  <select name="orderby" id="orderby" style="width:160px">
                    <option value="sortrank"><?php echo Lang('mytag_tag_guide_orderby_sortrank');?></option>
                    <option value="pubdate" selected><?php echo Lang('mytag_tag_guide_orderby_pubdate');?></option>
                    <option value="senddate"><?php echo Lang('mytag_tag_guide_orderby_senddate');?></option>
                    <option value="click"><?php echo Lang('mytag_tag_guide_orderby_click');?></option>
                    <option value="id"><?php echo Lang('mytag_tag_guide_orderby_id');?></option>
                    <option value="lastpost"><?php echo Lang('mytag_tag_guide_orderby_lastpost');?></option>
                    <option value="scores"><?php echo Lang('mytag_tag_guide_orderby_scores');?></option>
                    <option value="rand"><?php echo Lang('mytag_tag_guide_orderby_rand');?></option>
                  </select>
                  <label><input type="radio" name="order" value="desc" checked='1'> <?php echo Lang('freelist_orderby_desc');?></label>
                  <label><input type="radio" name="order" value="asc"> <?php echo Lang('freelist_orderby_asc');?></label>
                </td>
              </tr>
              <tr>
                <td><?php echo Lang('subday');?>：<input type="text" name="subday" id="subday" value="0" style="width:60px"> <?php echo Lang('freelist_subday_tip');?></td>
              </tr>
              <tr>
                <td><?php echo Lang('mytag_tag_guide_selarc');?>：<button  type="button"class="btn btn-success btn-sm" id="selarc" onClick="SelectArcList('form1.arcid');"><?php echo Lang('mytag_tag_guide_selarc_1');?></button>
                  <textarea name="arcid" rows="3" id="arcid" style="width:100%" class="mt-3"></textarea>
                </td>
              </tr>
              <tr>
                <td><?php echo Lang('spec_node_listtmp');?>：</td>
              </tr>
              <tr>
                <td><textarea name="innertext" cols="80" rows="6" id="myinnertext">·[field:textlink/]([field:pubdate function=MyDate('m-d',@me)/])<br></textarea></td>
              </tr>
              <tr>
                <td><?php echo Lang('mytag_tag_guide_field_tip');?></td>
              </tr>
              <tr>
                <td height="36">
                  <button type="button" name="Submit1" id="Submit1" class="btn btn-success btn-sm" onClick="DoSubmit('gettag')"><?php echo Lang('mytag_tag_guide_gettag');?></button>
                  <button type="button" name="Submit2" id="Submit2" class="btn btn-success btn-sm" onClick="DoSubmit('savetag')"><?php echo Lang('mytag_tag_guide_savetag');?></button>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </form>
      <tr>
        <td bgcolor="#f8f8f8" align="left"><?php echo Lang('result');?>：</td>
      </tr>
      <tr>
        <td>
          <div id="mdv" style="width:100%;height:360px"><iframe name="stafrm" frameborder="0" id="stafrm" width="100%" height="100%"></iframe></div>
        </td>
      </tr>
    </table>
  </center>
  <script>
    var editor = CodeMirror.fromTextArea(document.getElementById('myinnertext'), {
      lineNumbers: true,
      lineWrapping: true,
      mode: 'text/html'
    });
    function ChangeListStyle() {
      var itxt = document.getElementById("myinnertext");
      var myems = document.getElementsByName("liststyle");
      if (myems[0].checked) editor.setValue(document.getElementById("list1").innerHTML);
      else if (myems[1].checked) editor.setValue(document.getElementById("list2").innerHTML);
      else if (myems[2].checked) editor.setValue(document.getElementById("list3").innerHTML);
      else if (myems[3].checked) editor.setValue(document.getElementById("list4").innerHTML);
      itxt.value = itxt.value.replace("<BR>", "<br>");
      itxt.value = itxt.value.toLowerCase();
    }
    function DoSubmit(j) {
      document.form1.dopost.value = j;
      document.form1.submit();
    }
    function SelectArcList(fname) {
      var pos = GetWinPos(800,600);
      window.open("content_select_list.php?f=" + fname, "selArcList", "scrollbars=yes,resizable=yes,statebar=no,width=800,height=600,left=" + pos.left + ", top=" + pos.top);
    }
  </script>
</body>
</html>