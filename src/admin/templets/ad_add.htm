<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <title><?php echo Lang('ad_add');?></title>
  <link rel="stylesheet" href="../static/web/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/web/font/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/web/css/admin.min.css">
  <link rel="stylesheet" href="../static/web/css/daterangepicker.css">
  <script src="../static/web/js/jquery.min.js"></script>
  <script src="../static/web/js/moment.min.js"></script>
  <script src="../static/web/js/daterangepicker.js"></script>
  <script>
    function checkSubmit() {
      if (document.form1.tagname.value == "") {
        alert("<?php echo Lang('ad_tagname_empty');?>");
        document.form1.tagname.focus();
        return false;
      }
    }
    $(document).ready(function () {
      $('.datepicker').daterangepicker({
        "singleDatePicker": true,
        "autoApply": true,
        "showDropdowns": true,
        "linkedCalendars": false,
        "timePicker": true,
        "timePicker24Hour": true,
        //"timePickerSeconds": true,
        "showCustomRangeLabel": false,
        ranges: {
          '<?php echo Lang("today");?>': [moment(), moment()],
          '<?php echo Lang("yestoday");?>': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
          '<?php echo Lang("this_month");?>': [moment().startOf('month'), moment().startOf('month')],
          '<?php echo Lang("last_month");?>': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').startOf('month')]
        },
        "locale": {
          format: 'YYYY-MM-DD HH:mm:ss',
          applyLabel: '<?php echo Lang("ok");?>',
          cancelLabel: '<?php echo Lang("cancel");?>',
          daysOfWeek: ['<?php echo Lang("sun");?>','<?php echo Lang("mon");?>','<?php echo Lang("tues");?>','<?php echo Lang("wed");?>','<?php echo Lang("thur");?>','<?php echo Lang("fri");?>','<?php echo Lang("sat");?>'],
          monthNames: ['<?php echo Lang("jan");?>','<?php echo Lang("feb");?>','<?php echo Lang("mar");?>','<?php echo Lang("apr");?>','<?php echo Lang("may");?>','<?php echo Lang("jun");?>',
            '<?php echo Lang("jul");?>','<?php echo Lang("aug");?>','<?php echo Lang("sept");?>','<?php echo Lang("oct");?>','<?php echo Lang("nov");?>','<?php echo Lang("dec");?>'],
          firstDay: 1
        }
      }, function (start) {
        $(this).val(start.format("YYYY-MM-DD HH:mm"));
      });
    })
  </script>
  <style>
    .typetab {
      text-align: left;
    }
    .typetab ul {
      list-style: none;
    }
    .typetab ul li {
      float: left;
      width: 90px;
      height: 26px;
      line-height: 26px;
      background: #f8f8f8;
      text-align: center;
      cursor: pointer;
    }
    .typetab ul .act {
      background:#f8fcf2;
    }
    .i_table {
      border: 1px solid #eee;
    }
  </style>
</head>
<body>
  <form action="ad_add.php" method="post" name="form1" onSubmit="return checkSubmit()">
    <table width="98%"align="center"  cellpadding="3" cellspacing="1" class="table maintable mt-3 mb-3">
      <tr>
        <td bgcolor="#f8f8f8"><a href="ad_main.php"><?php echo Lang('ad_main');?></a> &gt; <?php echo Lang('ad_add');?></td>
      </tr>
      <tr>
        <td>
          <table width="100%" cellspacing="4" cellpadding="4" class="table table-borderless">
            <input type="hidden" name="normbody[style]" value="code" id="adstyle">
            <input type="hidden" name="_csrf_token" value="<?php echo $GLOBALS['csrf_token'];?>">
            <input type="hidden" name="dopost" value="save">
            <tr>
              <td colspan="3"><?php echo Lang('ad_tip');?></td>
            </tr>
            <tr>
              <td><?php echo Lang('ad_tagname');?>：</td>
              <td colspan="2"><input type="text" name="tagname" id="tagname" style="width:260px"><?php echo Lang('ad_tagname_tip');?></td>
            </tr>
            <tr>
              <td><?php echo Lang('ad_clsid');?>：</td>
              <td colspan="2">
                <select name="clsid" id="clsid" style="width:160px">
                  <option value="0"><?php echo Lang('ad_clsid_default');?></option>
                  <?php echo $option;?>
                </select>
              </td>
            </tr>
            <tr>
              <td><?php echo Lang('ad_typeid');?>：</td>
              <td colspan="2">
                <?php
                $tl = new DedeBIZ\TypeLink\TypeLink(0);
                $typeOptions = $tl->GetOptionArray(0,0,0);
                echo "<select name='typeid' style='width:160px'>";
                echo "<option value='0' selected>".Lang('ad_typeid_0')."</option>";
                echo $typeOptions;
                echo "</select>";
                ?><?php echo Lang('ad_typeid_tip');?>
              </td>
            </tr>
            <tr>
              <td><?php echo Lang('ad_adname');?>：</td>
              <td colspan="2"><input type="text" name="adname" id="adname" style="width:260px"></td>
            </tr>
            <tr>
              <td><?php echo Lang('ad_timeset');?>：</td>
              <td colspan="2">
                <label><input type="radio" name="timeset" value="0" checked="1"> <?php echo Lang('ad_timeset_0');?></label>
                <label><input type="radio" name="timeset" value="1"> <?php echo Lang('ad_timeset_1');?></label>
              </td>
            </tr>
            <tr>
              <td><?php echo Lang('ad_time');?>：</td>
              <td colspan="2">
                <?php echo Lang('ad_from');?>：<input type="text" name="starttime" id="starttime" value="<?php echo $startDay?>" style="width:160px">
                <?php echo Lang('ad_to');?>：<input type="text" name="endtime" id="endtime" value="<?php echo $endDay?>" style="width:160px">
              </td>
            </tr>
            <tr>
              <td height="80"><?php echo Lang('ad_normbody');?>：</td>
              <td width="70%">
                <div class="typetab">
                  <ul id="changeTab">
                    <li id="t_code" class="act"><?php echo Lang('ad_t_code');?></li>
                    <li id="t_txt"><?php echo Lang('ad_t_txt');?></li>
                    <li id="t_img"><?php echo Lang('ad_t_img');?></li>
                    <li id="t_flash"><?php echo Lang('ad_t_flash');?></li>
                  </ul>
                  <div style="clear:both"></div>
                </div>
                <div id="advert"></div>
              </td>
              <td width="10%"></td>
            </tr>
            <tr>
              <td height="80"><?php echo Lang('ad_expbody');?>：</td>
              <td><textarea name="expbody" rows="10" id="expbody" style="width:80%;height:100px"></textarea></td>
              <td></td>
            </tr>
            <tr>
              <td align="center" colspan="3" class="py-2"><button type="submit" class="btn btn-success btn-sm"><?php echo Lang('save');?></button></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </form>
  <div id="formtxt" style="display:none">
    <div class="content" id="code" style="display:none">
      <table width="80%" cellpadding="3" cellspacing="1" class="i_table">
        <tr>
          <td width="260"><?php echo Lang('ad_normbody_code');?>:<br>
            <?php echo Lang('ad_normbody_code_tip');?></td>
          <td><textarea name="normbody[htmlcode]" style="width:390px;height:100px"></textarea></td>
        </tr>
      </table>
    </div>
    <div class="content" id="txt" style="display:none">
      <table width="80%" cellpadding="3" cellspacing="1" class="i_table">
        <tr>
          <td width="260"><?php echo Lang('ad_normbody_title');?> *</td>
          <td><input type="text" name="normbody[title]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_link');?> *</td>
          <td><input type="text" name="normbody[link]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_color');?></td>
          <td><input type="text" name="normbody[color]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_size');?></td>
          <td><input type="text" name="normbody[size]" value="" style="width:360px"></td>
        </tr>
      </table>
    </div>
    <div class="content" id="img" style="display:none">
      <table width="80%" cellpadding="3" cellspacing="1" class="i_table">
        <tr>
          <td width="260"><?php echo Lang('ad_normbody_img_url');?> *</td>
          <td><input type="text" name="normbody[url]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_img_link');?> *</td>
          <td><input type="text" name="normbody[link]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_img_width');?></td>
          <td><input type="text" name="normbody[width]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_img_height');?></td>
          <td><input type="text" name="normbody[height]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_img_descrip');?></td>
          <td><input type="text" name="normbody[descrip]" value="" style="width:360px"></td>
        </tr>
      </table>
    </div>
    <div class="content" id="flash" style="display:none">
      <table width="80%" cellpadding="3" cellspacing="1" class="i_table">
        <tr>
          <td width="260"><?php echo Lang('ad_normbody_flash_link');?></td>
          <td><input type="text" name="normbody[link]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_flash_width');?></td>
          <td><input type="text" name="normbody[width]" value="" style="width:360px"></td>
        </tr>
        <tr>
          <td><?php echo Lang('ad_normbody_flash_height');?></td>
          <td><input type="text" name="normbody[height]" value="" style="width:360px"></td>
        </tr>
      </table>
    </div>
  </div>
  <script>
      (function ($) {
        function showcode(idName) {
          $("#advert").html("").html($("#formtxt>#" + idName).html());
          $("#adstyle").val(idName);
        }
        showcode('code');
        $("#changeTab>li").click(function () {
          var tabLi = $(this);
          var thistab = tabLi[0].id;
          $(".content").each(function () {
            if ("t_" + $(this)[0].id == thistab) {
              $("#changeTab>li").removeClass("act");
              $("#t_" + $(this)[0].id).addClass("act");
              showcode($(this)[0].id);
            }
          })
        })
      })(jQuery);
  </script>
</body>
</html>